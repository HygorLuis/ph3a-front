<section class="container card container-absolute-center">
  <h2 class="sub-titulo">Incluir Parcela</h2>
  <hr />
  <form [formGroup]="parcelaForm" (ngSubmit)="onSubmit()" class="sub-container">
    <div class="form-group">
      <label for="parcela" class="placeholder" [ngClass]="{'title': !parcelaForm.controls.parcela.invalid}">Parcela</label>
      <input id="parcela" name="parcela" type="number" required mask="separator.0" formControlName="parcela"/>

      @if (submitted && parcelaForm.controls.parcela.invalid || (parcelaForm.get('parcela')?.hasError('required') && parcelaForm.get('parcela')?.touched)) {
        <span class="error">Número da parcela é obrigatório.</span>
      }

      @if (submitted && parcelaForm.controls.parcela.invalid || ((parcelaForm.get('parcela')?.hasError('min') || parcelaForm.get('parcela')?.hasError('max')) && parcelaForm.get('parcela')?.touched)) {
        <span class="error">Preencha com valor entre 1 à 999.</span>
      }
    </div>

    <div class="form-group">
      <label for="valor" class="placeholder" [ngClass]="{'title': !parcelaForm.get('valor')?.hasError('required')}">Valor</label>
      <input id="valor" name="valor" type="text" required prefix="R$ " mask="separator.2" thousandSeparator="." formControlName="valor"/>

      @if (submitted && parcelaForm.controls.valor.invalid || (parcelaForm.get('valor')?.hasError('required') && parcelaForm.get('valor')?.touched)) {
        <span class="error">Valor é obrigatório.</span>
      }
    </div>

    <div class="form-group">
      <label for="data-vencimento">Data de Vencimento</label>
      <input id="data-vencimento" name="data-vencimento" type="date" required formControlName="dataVencimento" placeholder="data vencimento"/>

      @if (submitted && parcelaForm.controls.dataVencimento.invalid || (parcelaForm.get('dataVencimento')?.hasError('required') && parcelaForm.get('dataVencimento')?.touched)) {
        <span class="error">Data de vencimento é obrigatório.</span>
      }
    </div>

    <div class="botoes">
      <button type="submit" class="botao">Salvar</button>
      <button type="reset" class="botao" (click)="fechar()">Voltar</button>
    </div>
  </form>
</section>
